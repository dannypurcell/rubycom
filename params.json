{"name":"Rubycom","tagline":"Turn your library into a command-line app by simply including Rubycom.","body":"Rubycom\r\n---------------\r\n\r\n&copy; Danny Purcell 2013 | MIT license\r\n\r\nMakes creating command line tools as easy as including Rubycom.\r\n\r\nWhen a Module which has included Rubycom is run from the terminal, Rubycom will parse ARGV for a command name,\r\nmatch the command name to a method in the including module, and run the method with the given arguments.\r\n\r\nFeatures\r\n---------------\r\n\r\nAllows the user to write a properly documented module/class and convert it to a command line tool\r\nby simply including Rubycom at the bottom.\r\n\r\n* Provides a Command Line Interface for any library simply by stating `include Rubycom` at the bottom.\r\n* Public singleton methods are made accessible from the terminal. Usage documentation is pulled from method comments.\r\n* Method parameters become required CLI arguments. Optional (defaulted) parameters become CLI options.\r\n* Command consoles can be built up by including other modules before including Rubycom.\r\n* Included modules become commands, their public singleton methods become sub-commands.\r\n* Built in tab completion support for all commands.\r\n    * Users may call `./path/to/my_command.rb register_completions` then `source ~/.bash_profile` to register completions.\r\n* Customize Rubycom's functionality by calling `Rubycom.run_command` with custom plugin modules.\r\n* When calling run_command, functionality can be easily modified by providing a custom module for one of the following\r\nkeys `:arguments, :discover, :documentation, :source, :parameters, :executor, :output, :interface, :error` in plugins_options.\r\n\r\nInstallation\r\n---------------\r\n\r\n#### Install with Gem\r\n* Available on [Rubygems](https://rubygems.org/gems/rubycom)\r\n* Be sure one of your gem sources is `source 'https://rubygems.org'`\r\n* Run `gem install rubycom`\r\n\r\n#### Building locally\r\n* Fork the repository if you wish\r\n* Clone repository locally\r\n    * If using the main repo: `git clone https://github.com/dannypurcell/rubycom.git`\r\n* Run `rake install` if installing for the first time\r\n* If updating to the latest version run the following commands\r\n    * `git checkout master`\r\n    * `git pull origin master`\r\n        * If that causes any problems `git reset --hard origin/master`\r\n    * `rake upgrade`\r\n\r\nUsage\r\n---------------\r\n\r\nWrite your library, document them as you normally would. `include Rubycom` at the bottom.\r\nOptionally `#!/usr/bin/env ruby` at the top.\r\n\r\nNow any singleton methods `def self.method_name` will be available to call from the terminal.\r\n\r\nCalling `ruby ./path/to/module.rb <command_name>` will automatically discover and run your `<command_name>` singleton method.\r\nIf no method is found by the given name, a usage print out will be given including a summary of each command available\r\nand it's description from the corresponding method's comments.\r\n\r\nCalling a valid command with incorrect arguments will produce a usage print out for the matched method.\r\nRubycom will include as much documentation on the command line as you provide in your method comments. Currently Rubycom\r\nonly handles YardDoc style comments for discovering the parameter and return documentation. All other commentary will be\r\nincluded as part of the command description. In the absence of YardDoc annotations, Rubycom will generate a clean usage\r\ntext which may work for your method doc even though Rubycom is not specifically parsing it.\r\n\r\n\r\n#####Special commands\r\n\r\n| Command | Description | Options |\r\n| ------- |:-----------:| -------:|\r\n| `ruby ./path/to/module.rb help [command_name]` | Will print out usage for the module or optionally the specified command.||\r\n| `ruby ./path/to/module.rb register_completions ` | Setup bash tab completion ||\r\n| `ruby ./path/to/module.rb tab_complete [text]` | Print a list of possible matches for a given word ||\r\n\r\n###Arguments\r\n\r\nWhen using Rubycom's default modules:\r\n* Arguments are automatically parsed from the command line using Rubycom's ArgParse module and converted to Ruby types\r\nby Ruby's core Yaml module.\r\n* Arguments will be passed to your method in order of their appearance on the command line. With smart parsing for\r\noption arguments and flags.\r\n* If you specify a default value for a parameter in your method, then Rubycom will look for a named option argument in\r\nthe command line which matches the parameter's name or the first letter in the parameter name if it is unique among the\r\nother method parameters.\r\n* Users may call out option parameters in any order using `--<param_name>=<value>`, `--<param_name> = <value>`, or\r\n`--<param_name> <value>`\r\n    * Rubycom attempts to handle short names for optional parameters so specifying `-<p> <value>` or `-<param> <value>`\r\n        is equivalent to `--<parameter> <value>` if the characters uniquely match a parameter name in the called method.\r\n* Any parameter which is not mentioned in the command line will receive one of the remaining, unnamed arguments in order\r\nof appearance.\r\n* Optional parameters which do not get overridden either by a named optional argument or an available unnamed command line\r\n    argument will be filled by their default as usual.\r\n* If a rest parameter `*param_name` is defined in the method being called, any remaining arguments will be passed to the\r\n    rest parameter after the required and optional parameters are filled.\r\n\r\nRaison d'etre\r\n---------------\r\n\r\n* Command line scripts written from scratch often include redundant ARGV parsing code, little or no testing, and slim documentation.\r\n  Development speed is important and setting up a properly documented and tested terminal interface takes a while.\r\n* OptionParser and the like help script authors define options for a script.\r\n  They provide structure to the redundant code and slightly easier argument specification.\r\n* Thor and the like provide a framework the script author will extend to create command line tools.\r\n  The Prescriptive approach creates consistency but requires the script author to learn the framework and conform.\r\n\r\nWhile these are things do help, we are still writing redundant code and tightly coupling the functional code to the\r\ninterface which presents it. We also lack a generic command line parser which, if available, could help encourage\r\nRubyists to standardize command line inputs.\r\n\r\nSo, what to do?\r\n\r\n...Ruby is interpreted...use the source.\r\n\r\nRather than making concessions for the presentation and tightly coupling the functional code\r\nto the interface, it would be nice if a script author could simply write their code and attach the interface to it.\r\n\r\n\r\nHow it works\r\n---------------\r\nRubycom attaches the CLI to the functional code. The author is free to write the functional code as any other.\r\nIf a library needs to be accessible from the terminal, just `include Rubycom` at the bottom of the main Module and run\r\nthe ruby file.\r\n\r\n* Methods are made accessible from the terminal.\r\n* ARGV is parsed for a method to run and arguments.\r\n* Usage documentation is pulled from method comments.\r\n* Method parameters become required CLI arguments.\r\n* Optional (defaulted) parameters become CLI options.\r\n* Tab completion support if the user has registered it for the file.\r\n\r\nThe result is a library which can be consumed easily from other classes/modules and which is accessible from the command line.\r\n\r\nCustomizing Rubycom\r\n---------------\r\n\r\nNote: The plugin_options hash is currently taking Modules and calling specific methods on them. This will change to a\r\nSymbol => Proc mapping soon. Please log an issue on [GitHub](https://github.com/dannypurcell/rubycom/issues) if you\r\nwant this right away.\r\n\r\nRubycom is designed to fit several different ways of calling command line utilities and to respect many of the\r\nstrong conventions regarding command line semantics. While Rubycom's default functionality should fit many common use\r\ncases it is also built in a modular fashion such that the core functionality can be easily adapted to fit specific\r\nrequirements or user preferences.\r\n\r\n* Calling Rubycom via `include Rubycom` will attempt to execute the default functionality.\r\n* Alternately, calling `Rubycom.run_command(base, args=[], plugins_options={})` directly enables the user to inject\r\ncustom modules for specific portions of the execution via the plugin_options parameter.\r\n\r\n#####Plugin Module Contracts\r\n\r\n| Key | Expected Inputs | Expected Outputs |\r\n| -------------- |:---------------:|:----------------:|\r\n| :arguments | ARGV | A data structure representing the arguments, options, and flags |\r\n| :discover | The Module which included Rubycom and a parsed command line | A Method or Module representing the command which should be run  |\r\n| :documentation | The command to run and the :source plugin | The command matched to it's documentation |\r\n| :source | A Module or Method object | The source code for that reference |\r\n| :parameters | A command, a parsed command line, and the command documentation | The command parameters matched to their values for this run |\r\n| :executor | A command to execute and the command parameters matched to their values for this run | The result of a call to the given method with the given parameters |\r\n| :output | The command result | Some output handling action |\r\n| :interface | A command and it's documentation | A string representing the usage text to present in a terminal |\r\n| :error | An Error and a String representing usage text | Some error handling action |\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}